<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${title}">Program</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI",
                         Roboto, Helvetica, Arial, sans-serif;
            font-size: 12px;
            color: #2b2f38;
            margin: 32px;
        }

        /* ===== Header ===== */

        .header {
            display: table;
            width: 100%;
            margin-bottom: 26px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e5e7eb;
        }

        .header-left {
            display: table-cell;
            vertical-align: middle;
        }

        .header-right {
            display: table-cell;
            vertical-align: middle;
            text-align: right;
            width: 140px;
        }

        .program-title {
            font-size: 24px;
            font-weight: 600;
            margin: 0 0 6px 0;
            color: #111827;
        }

        .client-name {
            font-size: 16px;
            font-weight: 600;
            color: #1f2933;
            margin-bottom: 4px;
        }

        .header-dates {
            font-size: 12px;
            color: #6b7280;
        }

        .trainer-logo {
            max-width: 120px;
            max-height: 48px;
        }


        /* ===== Day block ===== */

        .day {
            background-color: #f7f9ff;
            border: 1px solid rgba(120,140,255,0.35);
            border-radius: 10px;
            padding: 12px 14px;
            margin-bottom: 18px;
            page-break-inside: avoid;
        }

        .day-title {
            font-size: 13.5px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(120,140,255,0.18);
        }

        /* ===== Exercises ===== */

        .exercise {
            padding: 6px 0;
            border-bottom: 1px solid rgba(120,140,255,0.30);
        }

        .exercise:last-of-type {
            border-bottom: none;
        }

        .exercise-name {
            font-weight: 500;
            margin-bottom: 1px;
            color: #1f2933;
        }

        .exercise-meta {
            font-size: 11px;
            color: #4b5563;
            line-height: 1.3;
        }

        /* ===== Program notes ===== */

        .program-notes {
            background-color: #f7f9ff;
            border: 1px solid rgba(120,140,255,0.25);
            border-radius: 10px;
            padding: 12px 14px;
            margin-top: 22px;
        }

        .program-notes-title {
            font-size: 13.5px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 8px;
            padding-bottom: 6px;
            border-bottom: 1px solid rgba(120,140,255,0.18);
        }

        .program-notes ul {
            margin: 0;
            padding-left: 0;
            list-style: none;
        }

        .program-notes li {
            font-size: 11px;
            color: #4b5563;
            line-height: 1.4;
            padding: 4px 0;
            border-bottom: 1px solid rgba(120,140,255,0.18);
        }

        .program-notes li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <h1 class="program-title"
            th:text="${title}">
            Program title
        </h1>

        <div class="client-name"
             th:if="${clientName != null and clientName.trim() != ''}"
             th:text="${clientName}">
            Client Name
        </div>

        <div class="header-dates"
             th:if="${startDate != '' or endDate != ''}">
            <span th:text="${startDate}"></span>
            <span th:if="${startDate != '' and endDate != ''}"> – </span>
            <span th:text="${endDate}"></span>
        </div>
    </div>

    <div class="header-right"
         th:if="${trainerLogoUrl != null}">
        <img class="trainer-logo"
             th:src="${trainerLogoUrl}"
             alt="Trainer logo"/>
    </div>
</div>


<div th:each="dayEntry : ${exercisesByDay}">
    <div class="day">
        <div class="day-title"
             th:text="${dayLabels[dayEntry.key] ?: dayEntry.key}">
            Day
        </div>

        <div th:each="exercise : ${dayEntry.value}" class="exercise">

            <div class="exercise-name"
                 th:text="${exercise.name}">
                Exercise
            </div>

            <div class="exercise-meta">
                <span th:text="${exercise.sets}">3</span>x
                <span th:text="${exercise.reps}">10–12</span>

                <span th:if="${exercise.restTime != null and exercise.restTime != ''}">
                    · Descanso – <span th:text="${exercise.restTime}">90s</span>
                </span>

                <span th:if="${exercise.intensity != null and exercise.intensity != ''}">
                    · Intensidad – <span th:text="${exercise.intensity}">1RM</span>
                </span>

                <span th:if="${exercise.tempo != null and exercise.tempo != ''}">
                    · Tempo – <span th:text="${exercise.tempo}">3-1-1-0</span>
                </span>

                <span th:if="${exercise.notes != null and exercise.notes != ''}">
                    · <span th:text="${exercise.notes}">Dropset</span>
                </span>
            </div>

        </div>
    </div>
</div>

<div class="program-notes"
     th:if="${notes != null and !notes.isEmpty()}">

    <div class="program-notes-title">
        Notas del programa
    </div>

    <ul>
        <li th:each="note : ${notes}"
            th:text="${note}">
            Nota
        </li>
    </ul>
</div>


</body>
</html>
