<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${title}">Program</title>

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI",
                         Roboto, Helvetica, Arial, sans-serif;
            font-size: 14px;
            color: #2b2f38;
            margin: 28px;
        }

        /* ===== Header ===== */

        .header {
            display: table;
            width: 100%;
            margin-bottom: 30px;
            padding-bottom: 18px;
            border-bottom: 1px solid #e5e7eb;
        }

        .header-left {
            display: table-cell;
            vertical-align: middle;
        }

        .header-right {
            display: table-cell;
            vertical-align: middle;
            text-align: right;
            width: 160px;
        }

        .program-title {
            font-size: 28px;
            font-weight: 600;
            margin: 0 0 8px 0;
            color: #111827;
        }

        .client-name {
            font-size: 18px;
            font-weight: 600;
            color: #1f2933;
            margin-bottom: 6px;
        }

        .header-dates {
            font-size: 13px;
            color: #6b7280;
        }

        .trainer-logo {
            max-width: 140px;
            max-height: 56px;
        }

        /* ===== Day block ===== */

        .day {
            background-color: #f7f9ff;
            border: 1px solid rgba(120,140,255,0.35);
            border-radius: 12px;
            padding: 16px 18px;
            margin-bottom: 22px;
            page-break-inside: avoid;
        }

        .day-title {
            font-size: 15px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(120,140,255,0.18);
        }

        /* ===== Exercises ===== */

        .exercise {
            padding: 8px 0;
            border-bottom: 1px solid rgba(120,140,255,0.30);
        }

        .exercise:last-of-type {
            border-bottom: none;
        }

        .exercise-name {
            font-weight: 500;
            margin-bottom: 2px;
            color: #1f2933;
        }

        .exercise-meta {
            font-size: 13px;
            color: #4b5563;
            line-height: 1.4;
        }

        /* ===== Program notes ===== */

        .program-notes {
            background-color: #f7f9ff;
            border: 1px solid rgba(120,140,255,0.25);
            border-radius: 12px;
            padding: 16px 18px;
            margin-top: 26px;

            page-break-inside: avoid;
            page-break-before: auto;
        }
        
        .program-notes-title {
            font-size: 15px;
            font-weight: 600;
            color: #4b5563;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(120,140,255,0.18);
        }

        .program-notes ul {
            margin: 0;
            padding-left: 0;
            list-style: none;

            page-break-inside: auto;
        }

        .program-notes li {
            font-size: 13px;
            color: #4b5563;
            line-height: 1.5;
            padding: 6px 0;
            border-bottom: 1px solid rgba(120,140,255,0.18);

            page-break-inside: avoid;
        }

        .program-notes li:last-child {
            border-bottom: none;
        }

    </style>
</head>
<body>

<div class="header">
    <div class="header-left">
        <h1 class="program-title" th:text="${title}">Program title</h1>

        <div class="client-name"
             th:if="${clientName != null and clientName.trim() != ''}"
             th:text="${clientName}">
            Client Name
        </div>

        <div class="header-dates"
             th:if="${startDate != '' or endDate != ''}">
            <span th:text="${startDate}"></span>
            <span th:if="${startDate != '' and endDate != ''}"> – </span>
            <span th:text="${endDate}"></span>
        </div>
    </div>

    <div class="header-right"
         th:if="${trainerLogoUrl != null}">
        <img class="trainer-logo"
             th:src="${trainerLogoUrl}"
             alt="Trainer logo"/>
    </div>
</div>

<div th:each="dayEntry : ${exercisesByDay}">
    <div class="day">
        <div class="day-title"
             th:text="${dayLabels[dayEntry.key] ?: dayEntry.key}">
            Day
        </div>

        <div th:each="exercise : ${dayEntry.value}" class="exercise">
            <div class="exercise-name" th:text="${exercise.name}">Exercise</div>

            <div class="exercise-meta">
                <span th:text="${exercise.sets}">3</span>x
                <span th:text="${exercise.reps}">10–12</span>

                <span th:if="${exercise.restTime != null and exercise.restTime != ''}">
                    · Descanso – <span th:text="${exercise.restTime}">90</span>
                </span>

                <span th:if="${exercise.intensity != null and exercise.intensity != ''}">
                    · Intensidad – <span th:text="${exercise.intensity}">1RM</span>
                </span>

                <span th:if="${exercise.tempo != null and exercise.tempo != ''}">
                    · Tempo – <span th:text="${exercise.tempo}">3-1-1-0</span>
                </span>

                <span th:if="${exercise.notes != null and exercise.notes != ''}">
                    · <span th:text="${exercise.notes}">Dropset</span>
                </span>
            </div>
        </div>
    </div>
</div>

<div class="program-notes"
     th:if="${notes != null and !notes.isEmpty()}">
    <div class="program-notes-title">Notas del programa</div>
    <ul>
        <li th:each="note : ${notes}" th:text="${note}">Nota</li>
    </ul>
</div>

</body>
</html>
